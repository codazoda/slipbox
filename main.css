@font-face {
    font-family: 'Atkinson Hyperlegible Mono';
    src: url('/media/fonts/AtkinsonHyperlegibleMono-Regular.ttf') format('truetype');
    font-style: normal;
    font-weight: 400;
    font-display: swap;
}

@font-face {
    font-family: 'Atkinson Hyperlegible Mono';
    src: url('/media/fonts/AtkinsonHyperlegibleMono-Bold.ttf') format('truetype');
    font-style: normal;
    font-weight: 700;
    font-display: swap;
}

* {
    box-sizing: border-box;
}

:root {
    color-scheme: light dark;

    --bg: #eeeeee;
    --surface: #ffffff;
    --surface-2: #eeeeee;
    --text: #444444;
    --title-text: #444444;
    --muted: #9a9a9a;
    --border: #c8c8c8;
    --hover: #d6d6d6;
    --danger: #b00020;
    --menu-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

@media (prefers-color-scheme: dark) {
    :root {
        --bg: #111111;
        --surface: #1a1a1a;
        --surface-2: #161616;
        --text: #b8b8b8;
        --title-text: #f2f2f2;
        --muted: #7f7f7f;
        --border: #333333;
        --hover: #2a2a2a;
        --danger: #ff6b6b;
        --menu-shadow: 0 6px 16px rgba(0, 0, 0, 0.55);
    }
}

html, body {
    height: calc(100% - 20px);
}

body {
    background-color: var(--bg);
    margin: 0 20px 20px 20px;
    padding: 0;
    font-family: 'Atkinson Hyperlegible Mono', monospace;
    font-size: 18px;
    line-height: 1.6;
    overflow: hidden;
    color: var(--text);
}

textarea {
    display: block;
    padding: 10px;
    width: 100%;
    height: calc(100% - 25px);
    outline: none;
    border: 0;
    background-color: var(--surface);
    resize: none;
    overflow: auto;
    font-family: 'Atkinson Hyperlegible Mono', monospace;
    font-size: 18px;
    line-height: 1.6;
    color: var(--text);
}

button {
    height: 40px;
    width: 40px;
    margin-right: 20px;
    margin-bottom: 20px;
    color: var(--text);
    border: 1px solid var(--text);
    background: var(--surface);
}

hr {
    height: 1px;
    border: 0;
    border-top: 1px solid var(--border);
}

/* The Menu */
#menu {
    position: fixed;
    right: 20px;
    background-color: var(--surface-2);
    box-shadow: var(--menu-shadow);
    display: none;
    border: 1px solid var(--border);
}

#menu ul {
    list-style-type: none;
    margin: 15px 0 15px 0;
    padding: 0;
}

#menu li {
    color: var(--text);
    padding: 5px 20px 5px 20px;
}

#menu li a {
    text-decoration: none;
    color: var(--text);
}

#menu li:hover {
    background-color: var(--hover);
}

/* The Title Line */
#title {
    display: inline;
    font-size: 18px;
    display: block;
    margin: 10px 0 10px 0;
    color: var(--muted);
    text-align: right;
    height: 24px;
    white-space: nowrap;
    overflow: hidden;
}

#title p {
    margin: 0 0;
}

#title a {
    color: var(--text);
}

#title .material-icons {
    color: var(--text);
}

#title #page {
    float: right;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 50%; /* Hack */
    margin-right: 10px;
    color: var(--title-text);
}

#title #page.save-failed {
    color: var(--danger);
}

#typebox,
#previewbox,
#printbox {
    font-size: 18px;
    line-height: 1.6;
}

#previewbox {
    max-width: none;
}

#printbox {
    display: none;
}

.material-icons {
    cursor: pointer;
}

/* Hack to align icons in most browsers */
.material-icons {
    vertical-align: -7px;
}

/* Hack to align firefox icons */
@-moz-document url-prefix(){
    .material-icons {
        vertical-align: -5px;
    }
}

/* desktop screens */
@media only screen and (min-width: 800px) {
    ul {
        max-width: 400px;
    }
}

/* printing */
@media print {
    html,
    body {
        height: auto !important;
        overflow: visible !important;
    }

    body {
        margin: 0 !important;
        background: #fff !important;
        color: #000 !important;
    }

    #title,
    #menu,
    #nav,
    #page {
        display: none !important;
    }

    #typebox,
    #previewbox,
    #printbox {
        width: 100% !important;
        height: auto !important;
        max-height: none !important;
        overflow: visible !important;
        border: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        background: transparent !important;
        color: #000 !important;
        page-break-inside: auto;
    }

    /* Raw editor text should preserve manual line breaks. */
    #typebox,
    #printbox {
        white-space: pre-wrap !important;
        line-height: 1.4 !important;
    }

    /* Markdown preview uses HTML block spacing; normalize for print. */
    #previewbox {
        white-space: normal !important;
        line-height: 1.4 !important;
    }

    #previewbox p,
    #previewbox ul,
    #previewbox ol,
    #previewbox blockquote,
    #previewbox pre {
        margin: 0 0 0.6em 0 !important;
    }

    #previewbox li {
        margin: 0 !important;
    }

    /* Browser quirk: textarea may print only first visible line. */
    body[data-print-source="edit"] #typebox {
        display: none !important;
    }

    body[data-print-source="edit"] #printbox {
        display: block !important;
    }

    body[data-print-source="preview"] #printbox {
        display: none !important;
    }

    /* Print only whichever editor pane is currently visible. */
    #typebox[style*="display: none"],
    #previewbox[style*="display: none"] {
        display: none !important;
    }
}
